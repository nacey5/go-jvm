# go-Jvm-7

## 方法调用和返回
## 方法调用指令
在Java7之前，Java虚拟机规范一共提供了4条方法调用指令。
其中invokestatic指令用来调用静态方法。 invokespecial指令
用来调用无须动态绑定的实例方法，包括构造函数、私有方法和
通过super关键字调用的超类方法。剩下的情况则属于动态绑定。
如果是针对接口类型的引用调用方法，就使用invokeinterface指令，
否则使用invokevirtual指令。
## 具体过程
首先，方法调用指令需要n+1个操作数，其中第1个操作数是uint16索引，
在字节码中紧跟在指令操作码的后面。通过这个索引，
可以从当前类的运行时常量池中找到一个方法符号引用，
解析这个符号引用就可以得到一个方法。注意，
这个方法并不一定就是最终要调用的那个方法，
所以可能还需要一个查找过程才能找到最终要调用的方法。
剩下的n个操作数是要传递给被调用方法的参数，从操作数栈中弹出。
## 类初始化的触发
执行new指令创建类实例，但类还没有被初始化。
执行putstaticgetstatic指令存取类的静态变量，但声明该字段的类还没有被初始化
执行invokestatic调用类的静态方法，但声明该方法的类还没有被初始化。
当初始化一个类时，如果类的超类还没有被初始化，要先初始化类的超类。口执行某些反射操作时。